.CODE
PUSH lblInit_main
CALL
HALT

simple_heap_init:   RET 0   ; Retorna inmediatamente
simple_malloc:      LOADFP  ; inicializacion del RA
LOADSP
STOREFP ; Finaliza inicializacion del RA
LOADHL  ; hl
DUP  ; hl
PUSH 1  ; 1
ADD ; hl+1
STORE 4 ; Guarda el resultado (el puntero a la primer celda de la region de memoria)
LOAD 3  ; Carga la cantidad de celdas a alojar (parametro debe ser positvo)
ADD
STOREHL ; Mueve el heap limit (h1). Expande el heap
STOREFP
RET 1   ; Retorna elimiando el parametro

.DATA
lblVTA:  NOP
.CODE

lblConstructor@A: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
FMEM 0
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 1

lblA_m1: LOADFP; Apilar el valor del registro
LOADSP  ; Apilar el valor del SP
STOREFP ; Guardar el valor del SP en el FP
STOREFP ; Almacena el tope de la pila en el registro
RET 0


lblA_setall: LOADFP; Apilar el valor del registro
LOADSP  ; Apilar el valor del SP
STOREFP ; Guardar el valor del SP en el FP
PUSH 2; Apilar el entero 2
MUL
.DATA
string_label_0: DW "hola", 0
.CODE
PUSH string_label_0
FMEM 0
STOREFP ; Almacena el tope de la pila en el registro
RET 1

.DATA
lblVTB:  NOP
.CODE

lblConstructor@B: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
FMEM 0
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 1

lblB_seta4: LOADFP; Apilar el valor del registro
LOADSP  ; Apilar el valor del SP
STOREFP ; Guardar el valor del SP en el FP
STOREFP ; Almacena el tope de la pila en el registro
RET 0


lblB_m2: LOADFP; Apilar el valor del registro
LOADSP  ; Apilar el valor del SP
STOREFP ; Guardar el valor del SP en el FP
STOREFP ; Almacena el tope de la pila en el registro
RET 0



.DATA
lblVTInit:  NOP
.CODE

lblConstructor@Init: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
FMEM 0
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 1


lblInit_main: LOADFP; Apilar el valor del registro
LOADSP  ; Apilar el valor del SP
STOREFP ; Guardar el valor del SP en el FP
STOREFP ; Almacena el tope de la pila en el registro
RET 0

.DATA
lblVTObject: NOP
.CODE

lblConstructor@Object: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
FMEM 0
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 1

debugPrint: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
LOAD 3  ; Apila el parámetro
IPRINT  ; Imprime el entero en el tope de la pila
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 1

.DATA
lblVTString: NOP
.CODE

lblConstructor@String: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
FMEM 0
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 1

.DATA
lblVTSystem: NOP
.CODE

lblConstructor@System: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
FMEM 0
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 1

lblMetprintC@System: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
LOAD 3  ; Apila el parámetro
CPRINT  ; Imprime el char en el tope de la pila
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 1

lblMetprintS@System: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
LOAD 3  ; Apila el parámetro
SPRINT  ; Imprime el string en el tope de la pila
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 1

lblMetprintln@System: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
PRNLN  ; Imprime el caracter de nueva línea
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 0

lblMetprintCln@System: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
LOAD 3  ; Apila el parámetro
CPRINT  ; Imprime el char en el tope de la pila
PRNLN  ; Imprime el caracter de nueva línea
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 1

lblMetprintSln@System: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
LOAD 3  ; Apila el parámetro
SPRINT  ; Imprime el booleano en el tope de la pila
PRNLN  ; Imprime el caracter de nueva línea
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 1

lblMetread@System: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
READ  ; Lee un valor entero
PUSH 48  ; Por ASCII
SUB
STORE 3  ; Devuelve el valor entero leído, poniendo el tope de la pila en la locación reservada
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 0

lblMetprintB@System: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
LOAD 3  ; Apila el parámetro
BPRINT  ; Imprime el booleano en el tope de la pila
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 1

lblMetprintIln@System: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
LOAD 3  ; Apila el parámetro
IPRINT  ; Imprime el entero en el tope de la pila
PRNLN  ; Imprime el caracter de nueva línea
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 1

lblMetprintI@System: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
LOAD 3  ; Apila el parámetro
IPRINT  ; Imprime el entero en el tope de la pila
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 1

lblMetprintBln@System: LOADFP  ; Apila el valor del registro fp
LOADSP  ; Apila el valor del registro sp
STOREFP  ; Almacena el tope de la pila en el registro fp
LOAD 3  ; Apila el parámetro
BPRINT  ; Imprime el booleano en el tope de la pila
PRNLN  ; Imprime el caracter de nueva línea
STOREFP  ; Almacena el tope de la pila en el registro fp
RET 1

